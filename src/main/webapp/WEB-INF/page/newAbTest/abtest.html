<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>实验列表</title>
    <link href="${cssRoot}/bootstrap.min.css" rel="stylesheet">
    <link href="${staticRoot}/font-awesome/css/font-awesome.css" rel="stylesheet">
    <!-- FooTable -->
    <link href="${cssRoot}/plugins/footable/footable.core.css" rel="stylesheet">
    <link href="${cssRoot}/animate.css" rel="stylesheet">
    <link href="${cssRoot}/style.css?rand=${random}" rel="stylesheet">
    <link href="${cssRoot}/styleT.css?rand=${random}" rel="stylesheet">
    <link href="${cssRoot}/styleT2.css?rand=${random}" rel="stylesheet">

    <link href="${staticRoot}/css/plugins/sweetalert/sweetalert.css" rel="stylesheet">
    <link href="${cssRoot}/oms/abtest/modalBox.css" rel="stylesheet">
    <!--<link href="${staticRoot}/css/oms/ruleconfig/look-page.css" rel="stylesheet">-->

    <link href="${cssRoot}/oms/abtest/infor-statistics.css" rel="stylesheet">
    <link href="${cssRoot}/oms/ruleconfig/jquery.searchableSelect.css" rel="stylesheet" type="text/css">

    <!--下拉选择-->
    <link href="${cssRoot}/../font-awesome/css/select2.min.css" rel="stylesheet">


    <style type="text/css">
        .v-center {
            display: flex;
            align-items: center;
        }
        .boxb-a > div {
            margin: 20px 0;
        }

        #addPage .small-boxb div {
            float: none
        }

        #addPage .small-boxb div label {
            vertical-align: top;
            margin-right: 10px;
        }

        #add-task-rule > div {
            margin: 10px 0;
        }

        .addShowType div {
            display: flex;
            margin-left: 0;
            align-items: center;
        }

        .addShowType div select {
            margin-top: 10px;
        }

        .addShowType div span {
            margin: 5px 0 0 15px;
        }

        .addShowType div input {
            margin-top: 7px;
        }

        .addShowType div p {
            margin: 0;
        }
        .bottom-pageb i{
            cursor:pointer;
        }
        .add-btn {
            margin: 20px auto 0;
            width:120px;
            height:36px;
            background:rgba(255,255,255,1);
            border:1px solid rgba(133, 155, 236, 1);
            box-shadow:0px 2px 2px 0px rgba(255,255,255,0.2), 0px 4px 6px 0px rgba(133,155,236,0.5);
            border-radius:18px;
        }
        button, input{
            font-family: inherit;
            font-size: inherit;
            line-height: inherit;
            /*width: 260px;*/
            height: 40px;
            border: 1px solid rgba(182, 182, 182, 1);
            border-radius: 8px;
            outline: none;
            text-indent: 10px;
        }
        select, textarea ,text{
            font-family: inherit;
            font-size: inherit;
            line-height: inherit;
            width: 260px;
            height: 40px;
            border: 1px solid rgba(182, 182, 182, 1);
            border-radius: 8px;
            outline: none;
            text-indent: 10px;
        }
    </style>
    <script>
        var globalConfig = {
            basePath: "${ctx}",
            staticRoot: "${staticRoot}",
            loginName: "${Session.sessionUser.loginName}",
            userName: "${Session.sessionUser.name}"
        };

        function swalMsg(msg) {
            swal({
                title: "",
                text: msg,
                confirmButtonColor: "#1ab394",
                confirmButtonText: "确定"
            });
        }

    </script>
</head>
<body ng-app="newAbtest" ng-controller="newAbtestController">
<div >
    <div class="header-box">
        <#include "/common/top.html" encoding="UTF-8" />
    </div>
    <nav class="navbar-default navbar-static-side" role="navigation" id="HeadTitle" >
        <div class="sidebar-collapse"  style="height: 675px;overflow-y: scroll;">
            <#include "/common/left.html" encoding="UTF-8" />
        </div>
    </nav>
</div>
<div class="content-box" ng-show="showTable==1">
    <div class="small-content">

    	<span class="btn btn-success btn-rounded btn-blueW btn-blueWb" ng-click="addAbTest()">
	          <i class="addTest"><span>新增实验</span></i>
	    </span>

        <!--<span class="btn btn-success btn-rounded btn-blueW btn-blueWb" ng-click="d3b()">-->
        <!--<i class="addTest"><span>第三步</span></i>-->
        <!--</span>-->

        <!-- 第二部分 -->
        <div class="small-boxb col-md-12">
            <div class="boxb-a">
                <p style="margin-top:20px;">
                    理财渠道：
                    <select class="chosen-select" style="width:160px;" tabindex="2" ng-model="search.channelCode" ng-change="serviceSelectCreate(12,search.channelCode)">
                        <option value="WK">悟空理财</option>
                        <option value="QB">玖富钱包</option>
                    </select>
                </p>
            </div>
            <div class="boxb-b">
                <p>服务类型：
                    <select class="chosen-select" style="width:160px;" tabindex="2" ng-model="search.serviceCode" ng-change="serviceSelectCreate(13,search.serviceCode)">
                        <option value="">全部</option>
                        <option value="{{x.key}}" ng-repeat="x in serviceCodeList">{{x.value}}</option>
                    </select>
                </p>
            </div>
            <div class="boxb-c">
                <p style="margin-top:20px;">用户行为：
                    <select class="chosen-select" style="width:160px;" tabindex="2" ng-model="search.userCode">
                        <option value="">全部</option>
                        <option value="{{x.key}}" ng-repeat="x in userCodeList">{{x.value}}</option>
                    </select>
                </p>
            </div>
            <div class="boxb-b">
                <p>实验状态：
                    <select class="chosen-select" style="width:160px;" tabindex="2" ng-model="search.testStatus">
                        <option value="">全部</option>
                        <option value="0">未开始</option>
                        <option value="1">进行中</option>
                        <option value="2">已发布</option>
                        <option value="3">已停止</option>
                    </select>
                </p>
            </div><div class="boxb-b">
            <p>审核状态：
                <select class="chosen-select" style="width:160px;" tabindex="2" ng-model="search.strategyStatus">
                    <option value="">全部</option>
                    <option value="0">待审核</option>
                    <option value="1">上线</option>
                    <option value="2">强制下线</option>
                    <option value="3">审核不通过</option>
                </select>
            </p>
        </div>
            <div class="boxb-a">
                <p style="margin-top:20px;">
                    <span class="btn btn-success btn-rounded btn-blueW btn-blueWa" ng-click="queryByList(1)">
                    <i class="fa fa-search"></i><span>搜索</span></span>
                    <span class="btn btn-success btn-rounded btn-blueW btn-blueWb" ng-click="reset()">
                    <i class="fa fa-refresh"></i><span>重置</span></span>
                </p>
            </div>

        </div>
        <!-- 第二部分 -->

        <!-- 第三部分 -->
        <div class="row">
            <div class="col-lg-12">
                <div class="ibox float-e-margins" style="margin-top:10px;">
                    <div class="ibox-content">
                        <table class="footable table table-stripped" data-page-size="8" data-filter=#filter>
                            <thead>
                            <tr>
                                <th>实验序号</th>
                                <th>理财渠道</th>
                                <th>实验名称</th>
                                <th>服务类型</th>
                                <th>用户行为</th>
                                <th>触发节点</th>
                                <th>触发策略</th>
                                <th>预期状态</th>
                                <th>版本数</th>
                                <th>实验状态</th>
                                <th>审核状态</th>
                                <th>操作</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="x in abTestList">
                                <td>{{x.id}}</td>
                                <td>{{x.channelCode}}</td>
                                <td>{{x.testName}}</td>
                                <td>{{x.serviceType}}</td>
                                <td>{{x.userCode}}</td>
                                <td ng-if="x.serviceType == '用户自定义'">{{x.touchCode|realtimeTagListFilter}}</td>
                                <td ng-if="x.serviceType != '用户自定义'">{{x.touchCode}}</td>
                                <td>{{x.touchStrategy}}</td>
                                <td>{{x.strategyResult}}</td>
                                <td>{{x.versionNumber}}</td>
                                <td>{{x.testStatus}}</td>
                                <td>{{x.strategyStatus}}</td>
                                <td>
                                    <a href='javascript:void(0)' class='look-start magService' ng-click="checkShow(x)"> 查看  </a>
                                    <a href='javascript:void(0)' class='look-start cloneService' ng-if="x.testStatusCode == 2 || x.testStatusCode == 3" ng-click="copy(x)"> 克隆 </a>
                                    <a href='javascript:void(0)' class='look-start checkService' ng-if="x.strategyStatusCode == 0" ng-click="showExamine(x)"> 审核 </a>
                                    <a href='javascript:void(0)' class='look-start checkService' ng-if="x.strategyStatusCode == 3" ng-click="updateBtn(x)"> 修改 </a>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                        <div class="bottom-page">
                            <div class="bottom-pageb">
                                <i class="fa fa-step-backward" ng-click="queryByList(1)"></i>
                                <i style="font-size:16px;" class="fa fa-caret-left" ng-click="queryByList(search.pageNo-1)"></i>
                                <p>第<span class="pageN">{{search.pageNo}}</span> <span class="commonN">共<span>{{search.pageCount}}</span>页</p>
                                <i style="font-size:16px;" class="fa fa-caret-right" ng-click="queryByList(search.pageNo+1)"></i>
                                <i style="margin-left:8px;" class="fa fa-step-forward" ng-click="queryByList(search.pageCount)"></i>
                                <i class="fa fa-refresh" ng-click="queryByList(search.pageNo)"></i>
                            </div>

                            <div class="bottom-pagec">
                                <p>显示<span>{{(search.pageNo-1)*search.perPageRowSize+1}}</span>到{{search.pageNo*search.perPageRowSize}}条，共<span>{{search.totalRowSize}}</span>记录
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--审核弹框@开始-->
<div class="modal" id="chcnkModal">
    <div class="modal-content" style="width: 600px; align-items: center">
        <div class="modal-body">
            <button class="add-btn" ng-click="check(1)">审核通过</button>
            <button id="checkNoPassBtn" class="add-btn" style="margin-left: 10px" ng-click="check(3)">审核不通过</button>
        </div>
        <div class="modal-footer">
            <button id="closeCheckBtn" class="add-btn" ng-click="closeCheckModal()">关闭</button>
        </div>
    </div>
</div>
<!--审核弹框@结束-->

<!--查看审核@开始-->
<div class="modal" id="chcnkModal2">
    <div class="modal-content" style="width: 600px; align-items: center">
        <div class="modal-body">
            <button class="add-btn" ng-click="check2(1)">审核通过</button>
            <button class="add-btn" style="margin-left: 10px" ng-click="check2(3)">审核不通过</button>
        </div>
        <div class="modal-footer">
            <button  class="add-btn" ng-click="closeCheckModal2()">关闭</button>
        </div>
    </div>
</div>
<!--查看审核@结束-->
<!--查看@开始-->
<link ng-if="showTable==2" href="${cssRoot}/oms/abtest/configuration.css" rel="stylesheet">
<div class="content-box" ng-show="showTable==2">
    <div class="wrap">
        <div id="disss">
            <button class="back-btn Return" ng-click="returnTable2()">返回</button>
            <div class="message-box">
                <div class="test-title"><p><b style="font-size: 22px">实验信息</b></p></div>
                <!--实验信息展示-->
                <div class="flex-layout">
                    <ul class="message-left">
                        <li>实验名称：
                            <span>{{res.testName}}</span>
                        </li>
                        <li>服务类型：
                            <span>{{res.serviceTypeCode}}</span>
                        </li>
                        <li>预期状态：
                            <span>{{res.strategyResult}}</span>
                        </li>
                        <!--预期结果银行查看-->
                        <li ng-if=" res.strategyResultKey == 'BANK_OPEN_SUCCESS'||res.strategyResultKey == 'BANK_OPEN_SUCCESS'
                            ||res.strategyResultKey == 'BANK_PAY_SUCCESS' ||res.strategyResultKey == 'BANK_PAY_SUCCESS'">
                            <div><input type = "checkbox" id="yqallselect" disabled="disabled">全部</div>
                            <span class="look-pageb" ng-repeat="x in checkboxParamList" >
                                <span style="width: 200px;height: 60px;float: left"><input type = "checkbox" class="queryyqBankCode" value = "{{x.bankCode}}" disabled="disabled">{{x.bankName}}</span>
                            </span>
                        </li>
                        <li style="float: left" >触发策略：
                            <div>{{res.touchStrategy}}</div><br>
                            <!--银行信息查看-->
                            <span ng-show="(IS_EFFECT ==1 && res.serviceTypeCodeKey == 'WK_BANK_FLOW') || (IS_EFFECT ==1 && res.serviceTypeCodeKey == 'QB_BANK_FLOW') ">
                                <div><input type = "checkbox" id="allselect" disabled="disabled">全部</div>
                                <span class="look-pageb" ng-model="bankschecked" ng-repeat="x in checkboxParamList"  >
                                    <span style="width: 200px;height: 60px;float: left"><input type = "checkbox" value = "{{x.bankCode}}" class="queryBankCode" disabled="disabled">{{x.bankName}}</span>
                                </span>
                            </span><br><br>
                            <!--实时标签查看-->
                            <div class="wraptime" ng-show="(IS_EFFECT ==1 && res.serviceTypeCodeKey == 'QB_USER_DEFINED') ||(IS_EFFECT ==1 && res.serviceTypeCodeKey == 'WK_USER_DEFINED') ">
                                <div class="query-selewrap" ng-show="res.serviceTypeCodeKey == 'WK_USER_DEFINED' || res.serviceTypeCodeKey == 'QB_USER_DEFINED' ">
                                </div>
                            </div>
                        </li>
                    </ul>
                    <ul class="message-right">
                        <li>实验状态：<span>{{res.testStatus}}</span></li>
                        <li>用户行为：<span>{{res.userCode}}</span></li>
                        <li ng-if ="res.serviceTypeCodeKey != 'WK_USER_DEFINED' && res.serviceTypeCodeKey != 'QB_USER_DEFINED' ">触发节点：<span>{{res.touchCode}}</span></li>
                        <li ng-if ="res.serviceTypeCodeKey == 'WK_USER_DEFINED' || res.serviceTypeCodeKey == 'QB_USER_DEFINED' ">
                            <div>
                                <label>触发节点：<b style="color: red;"></b></label>
                                <input type ="text" ng-repeat="x in tagSelectList" ng-if="x.english===realtimeTag" value="{{x.chinese}}" readonly></input>
                            </div>
                        </li>
                        <li>创建时间：<span>{{res.createTime}}</span></li>
                    </ul>
                </div>
                <button class="begin-btn" id="butt1" ng-click="begin(res.testStrategyId,1)">开始</button>
                <button class="begin-btn" id="butt2" ng-click="begin(res.testStrategyId,3)">结束</button>
                <button class="begin-btn" id="butt3" ng-click="showCheckExamine(res.testStrategyId)">审核</button>
            </div>

            <div class="message-box flow-box" id="llfp">
                <div class="test-title">
                    <p><b style="font-size: 22px">流量分配</b></p>
                </div>
                <p class="category">受众分组：{{rosterName?rosterName:'全部用户'}}</p>
            </div>

            <div class="message-box data-box">
                <div class="test-title"><p><b style="font-size: 22px">数据统计</b></p></div>
                <p class="category float-right" id="deadlineTime">数据截止于：{{versionList[1].deadlineTime}}</p>
                <p class="category" id="runTime">运行时长：{{res.runTime}}</p>
                <p class="category" id="chufa">总触发数：{{chufaCount}}</p>
                <p class="category" id="chenggong">总成功数：{{chenggongCount}}</p>

                <table class="data-table">
                    <thead>
                    <tr>
                        <td>版本号</td>
                        <td>版本</td>
                        <td>版本描述</td>
                        <td>触发数</td>
                        <td>成功数</td>
                        <td>成功率</td>
                        <td>置信区间</td>
                        <td>R方</td>
                        <td>操作</td>
                    </tr>
                    </thead>
                    <tbody id="tbody">
                    <tr class="tr" ng-repeat="x in versionList">
                        <td>{{x.strategyVersion }}</td>
                        <td>{{x.versionName}}</td>
                        <td>{{x.remark}}</td>
                        <td>{{x.touchCount}}</td>
                        <td>{{x.successCount}}</td>
                        <td>{{x.successRate}}</td>
                        <td>{{x.confidenceInterval}}</td>
                        <td>{{x.rpower}}</td>
                        <td>
                            <a href='javascript:void(0)' class='look-start bb' name='{{x.versionId}}' ng-click="versionDetail(x.versionId)">版本详情</a>
                            <a href='javascript:void(0)' class='look-start fb' name='{{x.versionId}}' ng-if="res.testStatusKey!=2 && x.canPush==1" ng-click="fabuShow(x)">发布</a>
                            <a  class='look-start checkService' ng-click="xiaoguo(x.strategyId)"> 效果分析 </a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<!--查看@结束-->

<!--查看停止弹窗@开始-->
<div class="modal" id="stop">
    <div class="modal-content" style="width: 600px; align-items: center">
        <h5 class="title">确定停止?</h5>
        <p class="issue-title">停止后不可再进行操作</p>
        <div class="button-flex">
            <button class="btn" id="cancel">取消</button>
            <button class="btn sure-btn" ng-click="commitStop()">确认</button>
        </div>
    </div>
</div>
<!--查看停止弹窗@结束-->

<!--查看版本详情弹窗@开始-->
<div class="modal" id="versionDetail">
    <div class="modal-content" style="width: 600px; align-items: center">
        <h5 class="title">版本详情</h5>
        <ul class="form-layer" id="xqid">
            <li>版本名称:<span>{{version.versionName}}</span></li>
            <li>版本描述:<span>{{version.remark}}</span></li>
            <li>触达类型:<span>{{version.touchType}}</span></li>
            <li>触达方式:<span>{{version.touchWay}}</span></li>
            <li>触达时间:<span>{{version.touchTime}}</span></li>
            <li ng-repeat="x in touchContentList">{{x.attrKey}}:<span>{{x.attrValue}}</span></li>
        </ul>
        <div class="button-flex">
            <button class="btn" ng-click="versionClose()">关闭</button>
        </div>
    </div>
</div>
<!--查看版本详情弹窗@结束-->

<!--查看发版@开始-->
<div class="modal" id="fabu">
    <div class="modal-content" style="width: 600px; align-items: center">
        <h5 class="title">确定发布?</h5>
        <p class="issue-title">发布后，该版本将变为普通策略,可编辑查看，其他版本将失效</p>
        <ul class="form-layer">
            <li>
                <span>名单类型:</span>
                <select id="userStrategy" name="userTagType" style="width: 167px;" ng-model="memberListName" ng-change="changeFindChannelGroups()">
                    <option value="{{x.key}}" ng-repeat="x in strategyList">{{x.value}}</option>
                </select>
            </li>
            <li class="start-b deploy-item-filter select1" id="userNameLikeSearch1">
                <p>模糊搜索：</p>
                <select class="mySelect" id="memberId" class="filter-select" style="width: 285px;" ng-model="memberListId">
                    <option value="{{x.rosterId}}" ng-repeat="x in strChannelGroups">{{x.rosterName}}</option>
                </select>
            </li>
            <li>
                <span>上线时间:</span>
                <input type="text" id="startTime" required="required" ng-model="fabu.startTime">
            </li>
            <li>
                <span>下线时间:</span>
                <input type="text" id="endTime" required="required" ng-model="fabu.endTime">
            </li>
        </ul>
        <div class="button-flex">
            <button class="btn" id="qx" ng-click="noFabuShow()">取消</button>
            <button class="btn sure-btn" id="bc" ng-click="confirmFabu()">保存</button>
        </div>
    </div>
</div>
<!--查看发版@结束-->

<!--新增实验@开始-->
<link ng-if="showTable==3" href="${cssRoot}/oms/abtest/configuration.css" rel="stylesheet">
<div class="content-box" ng-show="showTable==3">
    <div class="wrap">
        <a class="btn btn-blueW " id="returnBack" href="javascript:void(0)" ng-click="returnTable1()">返回</a>
        <div class="plan-bar">
			<span class="s-step s-step0"> <b><b class="active">1</b></b>
				<p class="active"></p> <em class="active">基础配置</em>
			</span>

            <span class="s-step s-step1"> <b><b>2</b></b>
				<p></p> <em>场景配置</em>
			</span>

            <span class="s-step s-step2"> <b><b>3</b></b>
				<p></p> <em>编辑版本</em>
			</span>

            <span class="s-step s-step3"> <b><b>4</b></b> <em>完成配置</em>
			</span>
        </div>

        <div class="deploy basis-deploy-1" ng-show="addshow==1">
            <ul class="deploy-box">
                <li class="deploy-item">理财渠道：
                    <select class="chosen-select" style="width:160px;" tabindex="2" ng-model="add.tabel1.channelCode" ng-change="addChannelChange(add.tabel1.channelCode)">
                        <option value="WK">悟空理财</option>
                        <option value="QB">玖富钱包</option>
                    </select>
                </li>
                <li class="deploy-item">服务类型：
                    <select class="chosen-select" style="width: 160px;" tabindex="2" ng-model="add.tabel1.serviceCode" ng-change="serviceSelectCreateAdd(13,add.tabel1.serviceCode)">
                        <option value="">全部</option>
                        <option value="{{x.key}}" ng-repeat="x in addServiceCodeList">{{x.value}}</option>
                    </select>
                </li>
                <li class="deploy-item">用户行为：
                    <select class="chosen-select" style="width:160px;" tabindex="2" ng-model="add.tabel1.userCode" ng-change="xingweiChange()">
                        <option value="">全部</option>
                        <option value="{{x.key}}" ng-repeat="x in addUserCodeList">{{x.value}}</option>
                    </select>
                </li>
                <li class="deploy-item">预期状态：
                    <select id="expResultStatus" name="expResultStatus" ng-model="add.tabel1.expResultStatus">
                        <option value="">全部</option>
                        <option value="{{x.key}}" ng-repeat="x in addExpResultList">{{x.value}}</option>
                    </select>
                </li>
                <!--预期结果银行新增-->
                <li><!--class="v-center">-->
                    <div ng-if=" add.tabel1.expResultStatus == 'BANK_OPEN_SUCCESS' ||add.tabel1.expResultStatus == 'BANK_OPEN_SUCCESS' ">
                        <div ><input type = "checkbox"  ng-click="addupdAll(2)" id="addyqAllchecked">全部</div>
                        <div class="look-pageb" ng-repeat="x in checkboxParamList" >
                            <span style="width: 200px;height: 60px;float: left"><input type = "checkbox" class="addyqBankCode" ng-click="addupdChangeBank(2)" name="addyqbanks"  value = "{{x.bankCode}}">{{x.bankName}}</span>
                        </div>
                    </div>
                </li>
                <li class="deploy-item">
                    <label>执行触达后</label>
                    <input type="number" min="1" max="7" required="required" placeholder="1-7" style="width: 80px; margin: 0px 15px;" ng-model="add.tabel1.strategyCycle">
                    <label>自然日内有效</label>
                </li>
                <li class="deploy-item">名单类型：
                    <select class="selected-nav" ng-model="add.tabel1.memberListName" ng-change="changeFindChannelGroups2()">
                        <option value="{{x.key}}" ng-repeat="x in add.tabel1.strategyList">{{x.value}}</option>
                    </select>
                </li>
                <li class="deploy-item-filter" id="userNameLikeSearch2">
                    模糊搜索：
                    <select class="mySelect" class="filter-select" style="width: 260px;height: 40px;border-radius: 8px;" ng-model="add.tabel1.memberListId" ng-change="queryMemberCount()" id="memberGroup">
                        <option value="{{x.rosterId}}" ng-repeat="x in add.tabel1.strChannelGroups">{{x.rosterName}}</option>
                    </select>
                    <label id="不能删用于模糊搜索占位"></label>
                    <!--<a href='javascript:void(0)' ng-click="queryMemberCount()">查询</a>用户数量 &nbsp {{add.tabel1.memberCount}}<label></label>-->
                </li>
                <li class="deploy-item" ng-if="add.tabel1.memberCount!=null">用户数量：&nbsp {{add.tabel1.memberCount}}</li>
                <li class="deploy-item">
                    <label>限制配置：<input placeholder='1-30' min='1' max='30' type='number' style='margin-left: 15px; width:80px' ng-model="add.tabel1.touchTimeCount"/>个自然日内最多触发</label>
                    <input placeholder='1-10' min='1' max='10' type='number' style='margin-left: 15px; width:80px' ng-model="add.tabel1.touchCount"/>次
                    <!--<input type='hidden' name='touchCountType' value='DAY'></li>-->
            </ul>
            <button class="next-btn next-btn0" ng-click="getInto2()">下一步</button>
        </div>

        <div class="deploy scene-deploy-2" ng-show="addshow==2">
            <ul class="deploy-box scene-box">

                <li class="deploy-item"><span>服务类型：</span> <label id="showService">{{add.tabel1.serviceCodeName}}</label></li>

                <li class="deploy-item"><span>用户行为：</span> <label id="showUserAction">{{add.tabel1.userCodeName}}</label></li>

                <li class="deploy-item" ng-if="add.tabel1.serviceCode != 'QB_USER_DEFINED' && add.tabel1.serviceCode != 'WK_USER_DEFINED' "><span>触发节点：</span>
                    <select ng-model="add.tabel1.triggerNode" ng-change="triggerChange()">
                        <option value="{{x.key}}" ng-repeat="x in addTriggerNodeList">{{x.value}}</option>
                    </select>
                </li>
                <li class="deploy-item" ng-if="add.tabel1.serviceCode == 'QB_USER_DEFINED' || add.tabel1.serviceCode == 'WK_USER_DEFINED' "><span>触发节点：</span>
                    <select id="tagSelectListid" ng-model="abc" ng-change="tagSelectListChange()">
                        <option  ng-repeat="x in addtagSelectList" value={{x.english}}>{{x.chinese}}</option>
                    </select>
                </li>
                <li class="deploy-item radio-flex">
                    <span>是否配触发策略：</span>
                    <p class="radio"><input id="yesInputConfig" type="radio" name="IS_EFFECT" ng-click="radioChange(1)"><label for="yesInputConfig" class="lable">是</label></p>
                    <p class="radio" id="radio-css"><input id="noConfig" type="radio" ng-value="0" name="IS_EFFECT" ng-click="radioChange(0)" checked="true"><label for="noConfig" class="label-no">否</label></p>
                </li>

                <li class="deploy-item">
                    <label id="triggerStrategy">触发策略：</label>
                    <div id="triggerStrategyContext">
                        <!--number-->
                        <div class="deploy-item" style="margin-bottom:15px" ng-repeat="x in add.tabel1.numberParamList">
                            <label style="width: 200px; text-align: right;">{{x.param.remarks}}：</label>
                            <div>
                                <div class="deploy-item" style="margin-bottom:15px;" ng-repeat="y in x.list">
                                    <label style="width: 300px; text-align: right">{{y.remarks}}：</label>
                                    <input placeholder="{{y.description}}" type="number" style="margin-left: 15px" id="{{y.key}}" name="{{y.key}}" required="required">
                                </div>
                            </div>
                        </div>
                        <!--select-->
                        <div class='deploy-item' style='margin-bottom:15px;text-align:right;' ng-repeat="x in add.tabel1.selectParamList">
                            <label>{{x.param.remarks}}：</label>
                            <select ng-repeat="y in x.list" id="{{x.ownCode}}" name="x.ownCode">
                                <option value='{{y.key}}'>{{y.description}}</option>
                            </select>
                        </div>
                        <!--text-->
                        <div class='deploy-item' style='margin-bottom:15px;text-align:right;' ng-repeat="x in add.tabel1.textParamList">
                            <label>{{x.param.remarks}}：</label>
                            <input placeholder='{{y.description}}' type='text' style='margin-left: 15px' required='required' id="{{x.key}}" name="{{x.key}}" ng-repeat="y in x.list"/>
                        </div>
                        <!--银行节点-->
                        <div class='deploy-item' style='display: flex; flex-wrap: wrap; margin-bottom:15px;' ng-show="(add.tabel1.IS_EFFECT == 1 && add.tabel1.serviceCode == 'WK_BANK_FLOW') || (add.tabel1.IS_EFFECT == 1 && add.tabel1.serviceCode == 'QB_BANK_FLOW') ">
                            <div style="width: 100%"><input type = "checkbox" ng-click="addupdAll(1)"   id="addAllchecked">全部</div>
                            <div style="width: 30%; flex-shrink: 0; flex-grow: 0;" class="look-pageb" ng-repeat="x in checkboxParamList">
                                <span style="text-align: left; display: flex; align-items: center;"><input type = "checkbox" class="addBankCode" ng-click="addupdChangeBank(1)" name="addbanks" value ="{{x.bankCode}}">{{x.bankName}}</span>
                            </div>
                        </div>
                        <!--实时标签-->
                        <div class='deploy-item'>
                            <!-- 动态效果 -->
                            <div class="query-wrap" ng-show=" (add.tabel1.IS_EFFECT == 1 && add.tabel1.serviceCode == 'QB_USER_DEFINED') ||(add.tabel1.IS_EFFECT == 1 && add.tabel1.serviceCode == 'WK_USER_DEFINED' )">
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
            <div class="btn-flex">
                <button class="back-btn1 flex-btn" ng-click="getInto1()">上一步</button>
                <button class="next-btn1 flex-btn" ng-click = "getInto3()">下一步</button>
            </div>
        </div>

        <div class="deploy compile-deploy-3" ng-show="addshow==3">
            <ul class="deploy-box compile-box">
                <li class="deploy-item">原始版本：
                    <button class="deploy-btn" ng-click="addConfig(0)" ng-if="showVersion==0">
                        <label>配置</label>
                    </button>
                    <button class="deploy-btn" ng-click="updateConfig(0,null)" ng-if="showVersion!=0">
                        <label>修改配置</label>
                    </button>
                </li>
                <li class="deploy-item">添加变量：<label id="showVariableConfig">{{varableTests}}</label> <b class="add" id="openVarConfig" ng-click="addVariable()">+</b>
                </li>
                <li class="deploy-item table-item">
                    <p style="white-space: nowrap">添加版本：</p>
                    <table class="table" id="versionTable">
                        <thead>
                        <tr>
                            <th style="width: 30%;">版本名称</th>
                            <th style="width: 30%;">版本描述</th>
                            <th style="width: 40%;">操作</th>
                        </tr>
                        <tr style='background:white;' ng-repeat="x in otherConfigVersionList">
                            <td>{{x.verName}}</td>
                            <td>{{x.verDesc}}</td>
                            <td>
                                <input type='button' value='修改' style='width:50px' ng-click="updateConfig(1,x)"/>&nbsp;&nbsp;&nbsp;&nbsp;
                                <input type='button' value='删除' style='width:60px' ng-click="delVersion(x)"/>
                            </td>
                        </tr>
                        </thead>
                    </table>
                </li>
                <button class="add-btn" id="addChuDaBtn" ng-click ="addConfig(1)" >添加</button>
            </ul>
            <div class="btn-flex">
                <button class="back-btn2 flex-btn" ng-click="return2()">上一步</button>
                <button class="next-btn2 flex-btn" ng-click="getInto4()">下一步</button>
            </div>
        </div>

        <div class="deploy finish-deploy-4" ng-show="addshow==4">
            <ul class="deploy-box finish-box">
                <li class="deploy-item"><span>理财渠道：</span> <label>{{add.tabel1.channelCode=='QB' && '玖富钱包' || '悟空理财'}}</label></span></li>
                <li class="deploy-item"><span>服务类型：</span><label >{{add.tabel1.serviceCodeName}}</label></li>
                <li class="deploy-item"><span>用户行为：</span><label >{{add.tabel1.userCodeName}}</label></li>
                <li class="deploy-item"><span>预期状态：</span><label >{{add.tabel4.showExpResultStatusName}}</label></li>
                <li class="deploy-item"><span>用户分组：</span><label ></label>{{add.tabel4.showMemberGroup}}</li>
                <li class="deploy-item"><span>版本数量：</span><label >{{otherConfigVersionList.length}}</label></li>
                <li class="deploy-item"><span>实验名称：</span>
                    <input type="text" id="testName" name="testName" ng-model="add.tabel4.testName" maxlength="15"/>
                </li>
                <li class="deploy-item"><span>审核人：</span>
                    <select style="width: 200px;" id="approverId" name="approverId" ng-model="add.tabel4.approverId">
                        <option value='{{x.key}}' ng-repeat="x in add.tabel4.auditors">{{x.value}}</option>
                    </select>
                </li>
            </ul>
            <div class="btn-flex">
                <button class="back-btn3 flex-btn" ng-click="return3()">上一步</button>
                <button id="saveTestBtn" class="flex-btn save-btn" ng-click="commitAdd()">保存</button>
            </div>
        </div>
    </div>

    <!--添加原始版本弹窗-->
    <div id="chuDaConfigModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 style="margin:0 auto;"><span id='headVerName'>{{add.tabel3.yuanshiVersion.headVerName}}</span></h2>
                <span id="closeChuDaBtn2" class="close" ng-click="closeChuDaBtn()"><b>×</b></span>
            </div>
            <form id="verForm">
                <div class="modal-body">
                    <li class="deploy-item">
                        <label>版本名称：</label>
                        <input id="verName" name="verName" type="text" ng-model="add.tabel3.yuanshiVersion.verName"/>
                    </li>

                    <li class="deploy-item">
                        <label>版本描述：</label>
                        <input id="verDesc" name="verDesc" type="text" ng-model="add.tabel3.yuanshiVersion.verDesc"/>
                    </li>

                    <li class="deploy-item">
                        <label>触达类型：</label>
                        <select id="strategyType" name="strategyType" ng-model="add.tabel3.yuanshiVersion.strategyType" ng-change="chudaModeQuery()">
                            <option value='{{x.key}}' ng-repeat="x in add.tabel3.yuanshiVersion.strategyTypeList">{{x.value}}</option>
                        </select>
                    </li>
                    <li class="deploy-item" id="strategyWay" name="strategyWay" ng-if="add.tabel3.yuanshiVersion.strategyType!='QA'">
                        <label>触达方式：</label>
                        <select id='touchWay' name='touchWay' ng-model="add.tabel3.yuanshiVersion.touchWay" ng-change="queryStrategyTime()">
                            <option value='{{x.key}}' ng-repeat="x in add.tabel3.yuanshiVersion.strategyWayList">{{x.value}}</option>
                        </select>
                    </li>
                    <!--qa唤醒-->
                    <div ng-if="add.tabel3.yuanshiVersion.strategyType=='QA'">
                        <li><label>触达方式：</label><span class='noneConfig'>无配置</span></li>
                        <li><label>触达时间：</label><span class='noneConfig'>无配置</span></li>
                        <li><label>触达配置：</label><span class='noneConfig'>无配置</span></li>
                    </div>
                    <!--在线/电话客服-->
                    <div ng-if="add.tabel3.yuanshiVersion.strategyType=='CUSTOMER_SERVICE' || add.tabel3.yuanshiVersion.strategyType=='PHONE'">
                        <li ng-if="add.tabel3.yuanshiVersion.touchWay!='NO_TOUCH'">
                            <label>触达时间：</label>
                            <select id='strategyTime' name='strategyTime' ng-model="add.tabel3.yuanshiVersion.strategyTime">
                                <option value="{{x.key}}" ng-repeat="x in add.tabel3.yuanshiVersion.strategyTimeList">{{x.value}}</option>
                            </select>
                        </li>
                    </div>
                    <!--奖励或者自定义-->
                    <div ng-if="'AWARD'==add.tabel3.yuanshiVersion.strategyType || 'USER_DEFINED'==add.tabel3.yuanshiVersion.strategyType">
                        <!--多奖励-->
                        <div ng-if="'AWARD'==add.tabel3.yuanshiVersion.strategyType">
                            <span class="single_color tian" ng-click="addAction()" style="color: #0a6aa1;">添加奖励</span>
                            <div class="news_over" style="width: 500px;height:180px;border: 1px solid #DED">
                                <div class="news_single">
                                    <div class="news_right" style="margin-left: 30px;">
                                        <span class="news_txt" ng-repeat="x in add.tabel3.yuanshiVersion.awardContentDto">{{x.awardDesc}}
                                            <span class="news_del" ng-click="deleteAction(x)" style="color: #0a6aa1;">删除</span>
                                            <br/>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--奖励＋软弹窗显示-->
                        <div ng-if="'AWARD'==add.tabel3.yuanshiVersion.strategyType && add.tabel3.yuanshiVersion.touchWay=='SOFT_POPUP'">
                            <li>
                                <label>弹窗内容：</label>
                                <textarea maxlength='20' rows='2' cols='10' placeholder='不超过20个字' style='margin-left: 15px;resize:none;height: 50px;width: 150px' id='POP_PAGE_CONTENT' name='POP_PAGE_CONTENT' required='required' ng-model="add.tabel3.yuanshiVersion.POP_PAGE_CONTENT"></textarea>
                            </li>
                            <li> <label>触达时间：</label>
                                <select id='strategyTime' name='strategyTime' ng-model="add.tabel3.yuanshiVersion.strategyTime">
                                    <option value="{{x.key}}" ng-repeat="x in add.tabel3.yuanshiVersion.strategyTimeList">{{x.value}}</option>
                                </select>
                            </li>
                            <li ng-if="'SMARTTOUCH'==add.tabel3.yuanshiVersion.strategyTime"><label>时间配置：</label><input placeholder='5-1440' min='5' max='1440' type='number' style='margin-left: 15px; width:80px' id='muchTime' name='muchTime' ng-model="add.tabel3.yuanshiVersion.muchTime"/>分钟内未达到预期结果</li>
                        </div>
                        <!--　自定义＋软弹窗-->
                        <div ng-if="'USER_DEFINED'==add.tabel3.yuanshiVersion.strategyType && add.tabel3.yuanshiVersion.touchWay=='SOFT_POPUP'">
                            <li><label>跳转类型：</label>
                                <select id='skipType' name='skipType' ng-model="add.tabel3.yuanshiVersion.skipType" ng-change="bindSkipTypeChange()">
                                    <option value='{{x.key}}' ng-repeat="x in add.tabel3.yuanshiVersion.skipTypeList">{{x.value}}</option>
                                </select>
                            </li>
                            <li class='LI_SKIP_URL' ng-if="add.tabel3.yuanshiVersion.skipType=='URL'">
                                <label>链接地址：</label>
                                <input placeholder='' type='text' style='margin-left: 15px' id='SKIP_URL' name='SKIP_URL' required='required' ng-model="add.tabel3.yuanshiVersion.SKIP_URL"/>
                            </li>
                            <li class='LI_PAGE_TYPE' ng-if="add.tabel3.yuanshiVersion.skipType=='PRIMORDIAL'">
                                <label>页面类型：</label>
                                <select id='PAGE_TYPE' name='PAGE_TYPE' ng-model="add.tabel3.yuanshiVersion.PAGE_TYPE" ng-change="bindPageTypeChange()">
                                    <option value='{{x.key}}' ng-repeat="x in add.tabel3.yuanshiVersion.PAGE_TYPEList">{{x.value}}</option>
                                </select>
                            </li>
                            <li class='LI_PRIMORDIAL_PAGE' ng-if="add.tabel3.yuanshiVersion.skipType=='PRIMORDIAL'">
                                <label>跳转页面：</label>
                                <select id='PRIMORDIAL_PAGE' name='PRIMORDIAL_PAGE' ng-model = "add.tabel3.yuanshiVersion.PRIMORDIAL_PAGE">
                                    <option value='{{x.key}}' ng-repeat="x in add.tabel3.yuanshiVersion.PRIMORDIAL_PAGEList">{{x.value}}</option>
                                </select>
                            </li>
                            <li><label>弹窗内容：</label><textarea maxlength='20' rows='2' cols='10' placeholder='不超过20个字' style='margin-left: 15px;resize:none;height: 50px;width: 150px' id='POP_PAGE_CONTENT' name='POP_PAGE_CONTENT' required='required' ng-model="add.tabel3.yuanshiVersion.POP_PAGE_CONTENT"></textarea></li>
                            <li><label>按钮文案：</label><input placeholder='不超过4个字' maxlength='4' type='text' style='margin-left: 15px' id='BTN_CONTENT' name='BTN_CONTENT' required='required' ng-model="add.tabel3.yuanshiVersion.BTN_CONTENT"/></li>
                            <li>
                                <label>触达时间：</label>
                                <select id='strategyTime' name='strategyTime' ng-model="add.tabel3.yuanshiVersion.strategyTime">
                                    <option value="{{x.key}}" ng-repeat="x in add.tabel3.yuanshiVersion.strategyTimeList">{{x.value}}</option>
                                </select>
                            </li>
                            <li ng-if="'SMARTTOUCH'==add.tabel3.yuanshiVersion.strategyTime"><label>时间配置：</label><input placeholder='5-1440' min='5' max='1440' type='number' style='margin-left: 15px; width:80px' id='muchTime' name='muchTime' ng-model="add.tabel3.yuanshiVersion.muchTime"/>分钟内未达到预期结果</li>

                        </div>
                        <!--弹窗-->
                        <div ng-if="'POPUP'==add.tabel3.yuanshiVersion.touchWay">
                            <li><label>跳转类型：</label>
                                <select id='skipType' name='skipType' ng-model="add.tabel3.yuanshiVersion.skipType" ng-change="bindSkipTypeChange()">
                                    <option value='{{x.key}}' ng-repeat="x in add.tabel3.yuanshiVersion.skipTypeList">{{x.value}}</option>
                                </select>
                            </li>
                            <li>
                                <img id='headPic' name='headPic' src='${staticRoot}/img/9f_logo.png' width='50px' height='50px' style='padding: 5px'>
                                <span  id='uploadPhoto' class='btn btn-info btn-rounded btn-gradient btn-gradienta' ng-click="uploadPhoto()">上传图片</span>
                                <input id='upload' type='file' name='upload' style='display: none' accept='image/!*'>
                                <input id='fileUrl' type='hidden' name='fileUrl' required='required' ng-model="add.tabel3.yuanshiVersion.popPageImg">
                            </li>
                            <li class='LI_SKIP_URL' ng-if="add.tabel3.yuanshiVersion.skipType=='URL'">
                                <label>链接地址：</label>
                                <input placeholder='' type='text' style='margin-left: 15px' id='SKIP_URL' name='SKIP_URL' required='required' ng-model="add.tabel3.yuanshiVersion.SKIP_URL"/>
                            </li>
                            <li class='LI_PAGE_TYPE' ng-if="add.tabel3.yuanshiVersion.skipType=='PRIMORDIAL'">
                                <label>页面类型：</label>
                                <select id='PAGE_TYPE' name='PAGE_TYPE' ng-model="add.tabel3.yuanshiVersion.PAGE_TYPE" ng-change="bindPageTypeChange()">
                                    <option value='{{x.key}}' ng-repeat="x in add.tabel3.yuanshiVersion.PAGE_TYPEList">{{x.value}}</option>
                                </select>
                            </li>
                            <li class='LI_PRIMORDIAL_PAGE' ng-if="add.tabel3.yuanshiVersion.skipType=='PRIMORDIAL'">
                                <label>跳转页面：</label>
                                <select id='PRIMORDIAL_PAGE' name='PRIMORDIAL_PAGE' ng-model = "add.tabel3.yuanshiVersion.PRIMORDIAL_PAGE">
                                    <option value='{{x.key}}' ng-repeat="x in add.tabel3.yuanshiVersion.PRIMORDIAL_PAGEList">{{x.value}}</option>
                                </select>
                            </li>
                            <li><label>弹窗内容：</label><textarea maxlength='20' rows='2' cols='10' placeholder='不超过20个字' style='margin-left: 15px;resize:none;height: 50px;width: 150px' id='POP_PAGE_CONTENT' name='POP_PAGE_CONTENT' required='required' ng-model="add.tabel3.yuanshiVersion.POP_PAGE_CONTENT"></textarea></li>
                            <li><label>按钮文案：</label><input placeholder='不超过4个字' maxlength='4' type='text' style='margin-left: 15px' id='BTN_CONTENT' name='BTN_CONTENT' required='required' ng-model="add.tabel3.yuanshiVersion.BTN_CONTENT"/></li>
                            <li>
                                <label>触达时间：</label>
                                <select id='strategyTime' name='strategyTime' ng-model="add.tabel3.yuanshiVersion.strategyTime">
                                    <option value="{{x.key}}" ng-repeat="x in add.tabel3.yuanshiVersion.strategyTimeList">{{x.value}}</option>
                                </select>
                            </li>
                            <li ng-if="'SMARTTOUCH'==add.tabel3.yuanshiVersion.strategyTime"><label>时间配置：</label><input placeholder='5-1440' min='5' max='1440' type='number' style='margin-left: 15px; width:80px' id='muchTime' name='muchTime' ng-model="add.tabel3.yuanshiVersion.muchTime"/>分钟内未达到预期结果</li>

                        </div>
                        <!--短信-->
                        <div ng-if="'MESSAGE'==add.tabel3.yuanshiVersion.touchWay">
                            <li><label>短信内容：</label><br><textarea maxlength='140' rows='7' cols='20' placeholder='不超过140个字' style='margin-left: 15px;resize:none;height: 160px;width: 300px' id='MESSAGE_CONTENT' name='MESSAGE_CONTENT' required='required' ng-model="add.tabel3.yuanshiVersion.MESSAGE_CONTENT"></textarea></li>
                            <li>
                                <label>触达时间：</label>
                                <select id='strategyTime' name='strategyTime' ng-model="add.tabel3.yuanshiVersion.strategyTime">
                                    <option value="{{x.key}}" ng-repeat="x in add.tabel3.yuanshiVersion.strategyTimeList">{{x.value}}</option>
                                </select>
                            </li>
                            <li ng-if="'SMARTTOUCH'==add.tabel3.yuanshiVersion.strategyTime"><label>时间配置：</label><input placeholder='5-1440' min='5' max='1440' type='number' style='margin-left: 15px; width:80px' id='muchTime' name='muchTime' ng-model="add.tabel3.yuanshiVersion.muchTime"/>分钟内未达到预期结果</li>

                        </div>
                        <!--站内信-->
                        <div ng-if="'PUSH_MAIL'==add.tabel3.yuanshiVersion.touchWay">
                            <li><label>站内信标题：</label><br><textarea maxlength='15' rows='2' cols='10' placeholder='不超过15个字' style='margin-left: 15px;resize:none;height: 50px;width: 300px' id='TOUCH_PUSH_TITLE' name='TOUCH_PUSH_TITLE' required='required' ng-model="add.tabel3.yuanshiVersion.TOUCH_PUSH_TITLE"></textarea></li>
                            <li><label>站内信内容：</label><br><textarea maxlength='100' rows='5' cols='10' placeholder='不超过100个字' style='margin-left: 15px;resize:none;height: 160px;width: 300px' id='TOUCH_PUSH_CONTENT' name='TOUCH_PUSH_CONTENT' required='required' ng-model="add.tabel3.yuanshiVersion.TOUCH_PUSH_CONTENT"></textarea></li>
                            <li>
                                <label>触达时间：</label>
                                <select id='strategyTime' name='strategyTime' ng-model="add.tabel3.yuanshiVersion.strategyTime">
                                    <option value="{{x.key}}" ng-repeat="x in add.tabel3.yuanshiVersion.strategyTimeList">{{x.value}}</option>
                                </select>
                            </li>
                            <li ng-if="'SMARTTOUCH'==add.tabel3.yuanshiVersion.strategyTime"><label>时间配置：</label><input placeholder='5-1440' min='5' max='1440' type='number' style='margin-left: 15px; width:80px' id='muchTime' name='muchTime' ng-model="add.tabel3.yuanshiVersion.muchTime"/>分钟内未达到预期结果</li>

                        </div>
                        <!--推送-->
                        <div ng-if="add.tabel3.yuanshiVersion.touchWay=='PUSH'">
                            <li>
                                <label>跳转类型：</label>
                                <select id='skipType' name='skipType' ng-model="add.tabel3.yuanshiVersion.skipType" ng-change="bindSkipTypeChange()">
                                    <option value='{{x.key}}' ng-repeat="x in add.tabel3.yuanshiVersion.skipTypeList">{{x.value}}</option>
                                </select>
                            </li>
                            <li class='LI_SKIP_URL' ng-if="add.tabel3.yuanshiVersion.skipType=='URL'">
                                <label>链接地址：</label>
                                <input placeholder='' type='text' style='margin-left: 15px' id='SKIP_URL' name='SKIP_URL' required='required' ng-model="add.tabel3.yuanshiVersion.SKIP_URL"/>
                            </li>
                            <li class='LI_PAGE_TYPE' ng-if="add.tabel3.yuanshiVersion.skipType=='PRIMORDIAL'">
                                <label>页面类型：</label>
                                <select id='PAGE_TYPE' name='PAGE_TYPE' ng-change="bindPageTypeChange()" ng-model="add.tabel3.yuanshiVersion.PAGE_TYPE">
                                    <option value='{{x.key}}' ng-repeat="x in add.tabel3.yuanshiVersion.PAGE_TYPEList">{{x.value}}</option>
                                </select>
                            </li>
                            <li class='LI_PRIMORDIAL_PAGE' ng-if="add.tabel3.yuanshiVersion.skipType=='PRIMORDIAL'">
                                <label>跳转页面：</label>
                                <select id='PRIMORDIAL_PAGE' name='PRIMORDIAL_PAGE' ng-model = "add.tabel3.yuanshiVersion.PRIMORDIAL_PAGE">
                                    <option value='{{x.key}}' ng-repeat="x in add.tabel3.yuanshiVersion.PRIMORDIAL_PAGEList">{{x.value}}</option>
                                </select>
                            </li>
                            <li><label>标题内容：</label><br><textarea maxlength='15' rows='2' cols='10' placeholder='不超过15个字' style='margin-left: 15px;resize:none;height: 50px;width: 150px' id='TOUCH_PUSH_TITLE' name='TOUCH_PUSH_TITLE' required='required' ng-model="add.tabel3.yuanshiVersion.TOUCH_PUSH_TITLE"></textarea></li>
                            <li><label>推送内容：</label><br><textarea maxlength='30' rows='2' cols='10' placeholder='不超过30个字' style='margin-left: 15px;resize:none;height: 50px;width: 150px' id='TOUCH_PUSH_CONTENT' name='TOUCH_PUSH_CONTENT' required='required' ng-model="add.tabel3.yuanshiVersion.TOUCH_PUSH_CONTENT"></textarea></li>
                            <li>
                                <label>触达时间：</label>
                                <select id='strategyTime' name='strategyTime' ng-model="add.tabel3.yuanshiVersion.strategyTime">
                                    <option value="{{x.key}}" ng-repeat="x in add.tabel3.yuanshiVersion.strategyTimeList">{{x.value}}</option>
                                </select>
                            </li>
                            <li ng-if="'SMARTTOUCH'==add.tabel3.yuanshiVersion.strategyTime"><label>时间配置：</label><input placeholder='5-1440' min='5' max='1440' type='number' style='margin-left: 15px; width:80px' id='muchTime' name='muchTime' ng-model="add.tabel3.yuanshiVersion.muchTime"/>分钟内未达到预期结果</li>

                        </div>
                        <!--自定义+banner-->
                        <div ng-if="'USER_DEFINED'==add.tabel3.yuanshiVersion.strategyType && 'BANNER'==add.tabel3.yuanshiVersion.touchWay">
                            <li><label>banner内容：</label><br><textarea maxlength='20' rows='2' cols='10' placeholder='不超过20个字' style='margin-left: 15px;resize:none;height: 50px;width: 150px' id='BANNER_CONTENT' name='BANNER_CONTENT' required='required' ng-model="add.tabel3.yuanshiVersion.BANNER_CONTENT"></textarea></li>
                            <li><label>按钮文案：</label><input placeholder='不超过4个字' maxlength='4' type='text' style='margin-left: 15px' id='BANNER_BTN_CONTENT' name='BANNER_BTN_CONTENT' required='required' ng-model="add.tabel3.yuanshiVersion.BANNER_BTN_CONTENT"/></li>
                            <li><label>跳转类型：</label>
                                <select id='skipType' name='skipType' ng-model="add.tabel3.yuanshiVersion.skipType" ng-change="bindSkipTypeChange()">
                                    <option value='{{x.key}}' ng-repeat="x in add.tabel3.yuanshiVersion.skipTypeList">{{x.value}}</option>
                                </select>
                            </li>
                            <li class='LI_SKIP_URL' ng-if="add.tabel3.yuanshiVersion.skipType=='URL'">
                                <label>链接地址：</label>
                                <input placeholder='' type='text' style='margin-left: 15px' id='BANNER_BTN_URL' name='BANNER_BTN_URL' required='required' ng-model="add.tabel3.yuanshiVersion.SKIP_URL"/>
                            </li>
                            <li class='LI_PAGE_TYPE' ng-if="add.tabel3.yuanshiVersion.skipType=='PRIMORDIAL'">
                                <label>页面类型：</label>
                                <select id='PAGE_TYPE' name='PAGE_TYPE' ng-change="bindPageTypeChange()" ng-model="add.tabel3.yuanshiVersion.PAGE_TYPE">
                                    <option value='{{x.key}}' ng-repeat="x in add.tabel3.yuanshiVersion.PAGE_TYPEList">{{x.value}}</option>
                                </select>
                            </li>
                            <li class='LI_PRIMORDIAL_PAGE' ng-if="add.tabel3.yuanshiVersion.skipType=='PRIMORDIAL'">
                                <label>跳转页面：</label>
                                <select id='PRIMORDIAL_PAGE' name='PRIMORDIAL_PAGE' ng-model = "add.tabel3.yuanshiVersion.PRIMORDIAL_PAGE">
                                    <option value='{{x.key}}' ng-repeat="x in add.tabel3.yuanshiVersion.PRIMORDIAL_PAGEList">{{x.value}}</option>
                                </select>
                            </li>
                            <li>
                                <label>触达时间：</label>
                                <select id='strategyTime' name='strategyTime' ng-model="add.tabel3.yuanshiVersion.strategyTime">
                                    <option value="{{x.key}}" ng-repeat="x in add.tabel3.yuanshiVersion.strategyTimeList">{{x.value}}</option>
                                </select>
                            </li>
                            <li ng-if="'SMARTTOUCH'==add.tabel3.yuanshiVersion.strategyTime"><label>时间配置：</label><input placeholder='5-1440' min='5' max='1440' type='number' style='margin-left: 15px; width:80px' id='muchTime' name='muchTime' ng-model="add.tabel3.yuanshiVersion.muchTime"/>分钟内未达到预期结果</li>

                        </div>
                        <!--奖励+banner-->
                        <div ng-if="'AWARD'==add.tabel3.yuanshiVersion.strategyType && 'BANNER'==add.tabel3.yuanshiVersion.touchWay">
                            <li>
                                <label>banner内容：</label>
                                <br>
                                <textarea maxlength='20' rows='2' cols='10' placeholder='不超过20个字' style='margin-left: 15px;resize:none;height: 50px;width: 150px' id='BANNER_CONTENT' name='BANNER_CONTENT' required='required' ng-model="add.tabel3.yuanshiVersion.BANNER_CONTENT"></textarea>
                            </li>
                            <li>
                                <label>触达时间：</label>
                                <select id='strategyTime' name='strategyTime' ng-model="add.tabel3.yuanshiVersion.strategyTime">
                                    <option value="{{x.key}}" ng-repeat="x in add.tabel3.yuanshiVersion.strategyTimeList">{{x.value}}</option>
                                </select>
                            </li>
                            <li ng-if="'SMARTTOUCH'==add.tabel3.yuanshiVersion.strategyTime"><label>时间配置：</label><input placeholder='5-1440' min='5' max='1440' type='number' style='margin-left: 15px; width:80px' id='muchTime' name='muchTime' ng-model="add.tabel3.yuanshiVersion.muchTime"/>分钟内未达到预期结果</li>
                        </div>
                    </div>

                </div>
            </form>
            <div class="modal-footer">
                <button class='add-btn' id="closeChuDaBtn" ng-click="closeChuDaBtn()">关闭</button>
                <button class='add-btn' ng-click="saveChuDaBtn(0)" ng-if="showVersion==0">保存</button>
                <button class='add-btn' ng-click="saveChuDaBtn(1)" ng-if="showVersion==1">保存</button>
                <!--确认修改-->
                <button class='add-btn' ng-click="saveChuDaBtn(2)" ng-if="showVersion==2">确认修改</button>
                <!--其他版本确认修改-->
                <button class='add-btn' ng-click="saveChuDaBtn(3)" ng-if="showVersion==3">确认修改</button>

            </div>
        </div>
    </div>
    a
    <!--奖励弹窗-->
    <div class="modal" id="jiangliShow">
        <div class="modal-content" style="width: 600px; align-items: center">
            <h5 class="title">添加奖励</h5>
            <ul class="form-layer">
                <li class='award'>
                    <label>奖励类型：</label>
                    <select id='awardType' name='awardType' ng-init="addJiangliParam.awardType='CARD'" ng-model="addJiangliParam.awardType">
                        <option value='CARD'>卡券</option>
                        <option value='JIFEN'>积分</option>
                        <option value="newCoupon">新卡券</option>
                        <option value="mallCoupon">商城卡券</option>
                    </select>
                </li>
                <li class='award' ng-if="'CARD'==addJiangliParam.awardType || 'newCoupon'==addJiangliParam.awardType || 'mallCoupon'==addJiangliParam.awardType">
                    <label>卡券ID：</label>
                    <input placeholder='' type='number' style='margin-left: 15px' ng-model="addJiangliParam.cardId"/>
                    <span style='color:red'></span>
                </li>
                <li class='award' ng-if="'JIFEN'==addJiangliParam.awardType">
                    <label>积分规则ID：</label>
                    <input placeholder='' type='text' style='margin-left: 15px' required='required' ng-model="addJiangliParam.jfRuleId"/>
                </li>
                <li class='award' ng-if="'JIFEN'==addJiangliParam.awardType">
                    <label>积分：</label>
                    <input placeholder='1-99999' type='number' style='margin-left: 15px' ng-model="addJiangliParam.jifenValue" required='required'/>
                </li>
                <li class='award' ng-if="'JIFEN'==addJiangliParam.awardType">
                    <label>积分描述：</label>
                    <input placeholder='' type='text' style='margin-left: 15px' required='required' ng-model="addJiangliParam.jifenDesc"/>
                </li>

            </ul>
            <div class="button-flex">
                <button class="btn" ng-click="addJiangli()">添加</button>
                <button class="btn" ng-click="closeJiangli()">关闭</button>
            </div>
        </div>
    </div>

    <!--添加变量-->
    <div id="addVariable" class="modal">
        <div class="modal-content">
            <div class="modal-body">
                <p>添加变量</p>
                <span>是否修改触达方式：</span>
                <p>
                    <input id="yesSetCdfs" type="radio" value="1" checked="checked" name="IS_SET_CDFS" ng-click="varableChedkedBtn(1)">是
                    <input id="noSetCdfs" type="radio" value="2" name="IS_SET_CDFS" ng-click="varableChedkedBtn(2)">否
                </p>
                <div id="variableDiv" ng-if="isConfigValable==2">
                    <p ng-repeat="x in varableList"><input style='vertical-align:middle;' type='checkbox' class="checkbox"  value="{{x.key}}"/> &nbsp;&nbsp;<sapn style='vertical-align:middle;'>{{x.value}}</sapn></p>
                </div>
                <div class="modal-footer">
                    <button class='add-btn'  ng-click = "closeVariableBtn()">关闭</button>
                    <button class='add-btn'  ng-click = "saveVariableBtn()">保存</button>
                </div>
            </div>
        </div>
    </div>

</div>
<!--新增实验@结束-->

<!--克隆+修改@开始-->
<link ng-if="showTable==4" href="${cssRoot}/oms/abtest/configuration.css" rel="stylesheet">
<div ng-controller="copyDetailController" ng-show="showTable==4">
    <#include "/newAbTest/copyDetail.html" encoding="UTF-8" />
</div>
<!--克隆+修改@结束-->

<!--效果分析@开始-->
<div  class="content-box" id="tz" ng-show="showTable == '6'">
    <div class="small-content">
        <div class="look-pagea">
            <button class="back-btn Return" ng-click="showTable = '2'">返回</button>
        </div>
        <!-- 第二部分 -->
        <div class="small-boxb col-md-12 look-pagea" style="height: 300px">
            <h2 style="color: #0e0e0e">服务策略信息</h2>
            <hr/>
            <div >
                <p style="margin-top:20px;" id="qd"></p>
                <p style="margin-top:20px;" id="servicetype"></p>
            </div>
            <div >
                <p style="margin-top:20px;" id="xw"></p>
                <p style="margin-top:20px;" id="cfjd"></p>
            </div>
            <div >
                <p style="margin-top:20px;" id="strategy"></p>
                <p style="margin-top:20px;" id="serviceId"></p>
            </div>
        </div>

        <div class="small-boxb col-md-12 look-pagea" style="height: 200px">
            <h2 style="color: #0e0e0e">名单信息</h2>
            <hr/>
            <div class="boxb-a">
                <p style="margin-top:20px;" id="rosterName"></p>
                <p style="margin-top:20px;" id="createTime"></p>
            </div>
            <div class="boxb-a">
                <p style="margin-top:20px;" id="channelCode"></p>
                <p style="margin-top:20px;" id="updateTime"></p>
            </div>
            <div class="boxb-a">
                <p style="margin-top:20px;" id="type"></p>
                <p style="margin-top:20px;" id="createPeople"></p>
            </div>
            <div class="boxb-a">
                <p style="margin-top:20px;" id="rosterNumber"></p>
            </div>
        </div>


        <div class="small-boxb col-md-12 look-pagea" style="height: auto;">
            <h2>策略信息报告</h2>
            <hr/>
            <h4 style="margin-left: 30px;">用户特征成功率</h4>

            <div class="boxb-a">
                <p style="margin-top:20px;">用户标签：
                    <select class="chosen-select" style="width:160px;" ng-model="select" id="testSelect" ng-click="change()">
                        <option value="1">性别</option>
                        <option value="2">年龄</option>
                        <option value="3">手机号地区</option>
                        <option value="4">网贷出借次数</option>
                        <option value="5">网贷出借偏好期限</option>
                        <option value="6">会员等级</option>
                        <option value="7">推广渠道</option>
                        <option value="8">来源渠道</option>
                        <option value="9">可用卡券数</option>
                    </select>
                    </n>
                    </n>
                </p>

            </div>
            <div id="container" style="width: 550px; height: 400px; margin: 0 auto"></div>
            <div id="containerbar" style="width: 550px; height: 400px; margin: 0 auto"></div>




        </div>

        <div class="ibox float-e-margins" style="margin-top:10px;">
            <h4 style="margin-left: 30px;">每日触发数据</h4>
            <div class="ibox-content">
                <table class="footable table table-stripped" data-page-size="8" data-filter=#filter>
                    <thead>
                    <tr>
                        <!-- <th></th> -->
                        <th>日期</th>
                        <th>累计总触发数</th>
                        <th>当日触发术</th>
                        <th>累计成功数</th>
                        <th>当日成功数</th>
                    </tr>
                    </thead>
                    <tbody >
                    <tr ng-repeat="x in initiativeList">
                        <td>{{x.createTime}}</td>
                        <td>{{x.sumReachNumDaily}}</td>
                        <td>{{x.reachNumDaily}}</td>
                        <td>{{x.sumSuccessNumDaily}}</td>
                        <td>{{x.successNumDaily}}</td>
                    </tr>
                    </tbody>
                </table>
                <div class="bottom-page">
                    <div class="bottom-pagea">
                        <select style="width:58px;height:23px;" name="pageSize" ng-model="daily.pageSize"
                                ng-change="dailyTouch()">
                            <option value="5">5</option>
                            <option value="10">10</option>
                            <option value="15">15</option>
                        </select>
                    </div>
                    <div class="bottom-pageb">
                        <i class="fa fa-step-backward" ng-click="dailyTouch()"></i>
                        <i style="font-size:16px;" class="fa fa-caret-left"
                           ng-click="dailyTouch(daily.pageNo-1)"></i>
                        <p>第<span class="pageN" name="currentPage"
                                  ng-model="daily.pageNo">{{daily.pageNo}}</span>共<span>{{daily.pageCount}}</span>页
                        </p>
                        <i style="font-size:16px;" class="fa fa-caret-right"
                           ng-click="dailyTouch(daily.pageNo+1)"></i>
                        <i style="margin-left:8px;" class="fa fa-step-forward"
                           ng-click="dailyTouch(daily.pageCount)"></i>
                        <i class="fa fa-refresh" ng-click="dailyTouch(daily.pageNo)"></i>
                    </div>

                    <div class="bottom-pagec">
                        <p>显示<span>{{(daily.pageNo-1)*daily.pageSize+1}}</span>到{{daily.pageNo*daily.pageSize
                            >= daily.totalRowSize && daily.totalRowSize ||                            daily.pageNo*daily.pageSize < daily.totalRowSize &&
                            daily.pageNo*daily.pageSize || daily.totalRowSize < 1&& 0 }}条，共<span>{{daily.totalRowSize}}</span>记录
                        </p>
                    </div>
                </div>a




            </div>
        </div>
    </div>
</div>
</div>
<!--效果分析@结束-->
<script src="${jsRoot}/jquery-2.1.1.js"></script>
<script src="${jsRoot}/bootstrap.min.js"></script>
<script src="${jsRoot}/plugins/slimscroll/jquery.slimscroll.min.js"></script>
<script src="${jsRoot}/plugins/jeditable/jquery.jeditable.js"></script>

<script src="${jsRoot}/angular/angular.min.js"></script>
<script src="${jsRoot}/plugins/jquery-ui/jquery-ui.min.js"></script>
<script type="text/javascript" src="${staticRoot}/js/plugins/sweetalert/sweetalert.min.js"></script>

<script src="${jsRoot}/plugins/metisMenu/jquery.metisMenu.js"></script>
<!-- Custom and plugin javascript -->
<script src="${jsRoot}/inspinia.js"></script>
<script src="${jsRoot}/plugins/pace/pace.min.js"></script>
<script src="${jsRoot}/plugins/fileUpload/jquery.fileupload.js"></script>
<script src="${jsRoot}/plugins/fileUpload/jquery.iframe-transport.js"></script>
<script src="${jsRoot}/plugins/fileUpload/jquery.ui.widget.js"></script>
<script src="${jsRoot}/plugins/fileUpload/jquery.fileupload-process.js"></script>
<script src="${jsRoot}/plugins/fileUpload/jquery.fileupload-validate.js"></script>
<script src="${jsRoot}/biz/baseFoot.js?rand=${random}"></script>


<!-- Data Tables -->
<script src="${jsRoot}/plugins/dataTables/jquery.dataTables.js"></script>
<script src="${jsRoot}/plugins/dataTables/dataTables.bootstrap.js"></script>
<script src="${jsRoot}/plugins/dataTables/dataTables.responsive.js"></script>
<script src="${jsRoot}/plugins/dataTables/dataTables.tableTools.min.js"></script>
<script src="${jsRoot}/plugins/laydate/laydate.js"></script>
<script src="${jsRoot}/DateUtil.js"></script>
<!-- Custom and plugin javascript -->
<script src="${jsRoot}/inspinia.js"></script>
<script type="text/javascript" src="${jsRoot}/angular/angular.min.js"></script>
<!--  日期控件  -->
<script src="${jsRoot}/plugins/datapicker/bootstrap-datepicker.js"></script>
<script src="${jsRoot}/plugins/datapicker/bootstrap-datepicker.zh-CN.min.js"></script>
<!-- 提示弹窗 -->
<script type="text/javascript" src="${staticRoot}/js/plugins/sweetalert/sweetalert.min.js"></script>

<!--引入 自定义angularjs-->
<script src="${jsRoot}/biz/newAbtest/newAbtestController.js?rand=${random}"></script>
<script src="${jsRoot}/biz/newAbtest/copyDetail.js?rand=${random}"></script>

<!--下拉搜索-->
<script src="${jsRoot}/plugins/jeditable/select2.full.min.js"></script>
<!--大数据名单查询js-->
<script src="${jsRoot}/oms/ruleconfig/jquery.searchableSelect.js"></script>
<script type="text/javascript" charset="utf-8">
    $(function(){
        $('.mySelect').select2();
    })

    function clickAll(){
        $(".checkOne").prop("checked",$(".checkAll").prop("checked"));
    }

    function ok() {
        alert(111);
    }




    function clickOne(){
        var allChecked = true;
        $(".checkOne").each(function(){
            if($(this).prop("checked") == false){
                allChecked = false;
            };
        });
        if(allChecked){
            $(".checkAll").prop("checked",true);
        } else {
            $(".checkAll").prop("checked",false);
        }
    }

    //时间插件使用
    var queryStartTime = laydate({
        elem: '#startTime',
        istime: true,
        format: 'YYYY-mm-DD hh:mm:ss',
        event: 'click'
    });
    var queryEndTime = laydate({
        elem: '#endTime',
        istime: true,
        format: 'YYYY-mm-DD hh:mm:ss',
        event: 'click'
    });
</script>
